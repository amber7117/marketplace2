(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[631],{941:(e,s,a)=>{"use strict";a.d(s,{p:()=>i});var t=a(8673),l=a(7093),r=a(2056);let i=l.forwardRef((e,s)=>{let{className:a,type:l,...i}=e;return(0,t.jsx)("input",{type:l,className:(0,r.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:s,...i})});i.displayName="Input"},1598:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(2803).A)("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]])},2803:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});var t=a(7093),l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let r=(e,s)=>{let a=(0,t.forwardRef)((a,r)=>{let{color:i="currentColor",size:c=24,strokeWidth:n=2,absoluteStrokeWidth:d,className:o="",children:m,...u}=a;return(0,t.createElement)("svg",{ref:r,...l,width:c,height:c,stroke:i,strokeWidth:d?24*Number(n)/Number(c):n,className:["lucide","lucide-".concat(e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim()),o].join(" "),...u},[...s.map(e=>{let[s,a]=e;return(0,t.createElement)(s,a)}),...Array.isArray(m)?m:[m]])});return a.displayName="".concat(e),a}},6587:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(2803).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},8070:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>y});var t=a(8673),l=a(7093),r=a(6504),i=a(331),c=a(941),n=a(393),d=a(2803);let o=(0,d.A)("ArrowDownCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]]),m=(0,d.A)("ArrowUpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]]);var u=a(1598),x=a(6587),h=a(5845),p=a(3312),f=a(2056),v=a(8972);function y(){let e=(0,r.useTranslations)("wallet"),s=(0,r.useTranslations)("common"),{currency:a}=(0,v.x3)(),[d,y]=(0,l.useState)(null),[j,N]=(0,l.useState)([]),[g,w]=(0,l.useState)(!0),[b,k]=(0,l.useState)(!1),[A,C]=(0,l.useState)(!1),[S,W]=(0,l.useState)(""),[_,E]=(0,l.useState)(!1);(0,l.useEffect)(()=>{F(),Z()},[]);let F=async()=>{try{var e;let s=await h.Uf.getWallet();y(null!=(e=s.data.data)?e:null)}catch(e){console.error("Failed to fetch wallet:",e)}},Z=async()=>{try{var e;w(!0);let s=await h.Uf.getTransactions({page:1});N(null!=(e=s.data.data)?e:[])}catch(e){console.error("Failed to fetch transactions:",e)}finally{w(!1)}},$=async()=>{let s=parseFloat(S);if(isNaN(s)||s<=0)return void alert(e("invalidAmount"));E(!0);try{await h.Uf.deposit(s,a),W(""),k(!1),F(),Z(),alert(e("depositSuccess"))}catch(s){console.error("Deposit failed:",s),alert(e("depositFailed"))}finally{E(!1)}},B=async()=>{let s=parseFloat(S);if(isNaN(s)||s<=0)return void alert(e("invalidAmount"));if(d&&s>d.balance)return void alert(e("insufficientBalance"));E(!0);try{await h.Uf.withdraw(s,a),W(""),C(!1),F(),Z(),alert(e("withdrawSuccess"))}catch(s){console.error("Withdraw failed:",s),alert(e("withdrawFailed"))}finally{E(!1)}};return(0,t.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,t.jsx)("h1",{className:"mb-8 text-3xl font-bold",children:e("title")}),(0,t.jsxs)("div",{className:"grid gap-6 lg:grid-cols-3",children:[(0,t.jsx)("div",{className:"lg:col-span-1",children:(0,t.jsxs)(n.Zp,{children:[(0,t.jsx)(n.aR,{children:(0,t.jsxs)(n.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(u.A,{className:"h-5 w-5"}),e("balance")]})}),(0,t.jsxs)(n.Wu,{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-4xl font-bold text-primary",children:d?(0,p.vv)(d.balance,a):"---"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mt-2",children:e("availableBalance")})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(i.$,{className:"w-full",onClick:()=>{k(!b),C(!1),W("")},children:[(0,t.jsx)(o,{className:"mr-2 h-4 w-4"}),e("deposit")]}),(0,t.jsxs)(i.$,{variant:"outline",className:"w-full",onClick:()=>{C(!A),k(!1),W("")},children:[(0,t.jsx)(m,{className:"mr-2 h-4 w-4"}),e("withdraw")]})]}),b&&(0,t.jsxs)("div",{className:"space-y-4 border-t pt-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:e("amount")}),(0,t.jsx)(c.p,{type:"number",placeholder:"0.00",value:S,onChange:e=>W(e.target.value),min:"0",step:"0.01"})]}),(0,t.jsx)(i.$,{className:"w-full",onClick:$,disabled:_,children:_?s("processing"):e("confirmDeposit")})]}),A&&(0,t.jsxs)("div",{className:"space-y-4 border-t pt-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:e("amount")}),(0,t.jsx)(c.p,{type:"number",placeholder:"0.00",value:S,onChange:e=>W(e.target.value),min:"0",step:"0.01",max:(null==d?void 0:d.balance)||0})]}),(0,t.jsx)(i.$,{className:"w-full",onClick:B,disabled:_,children:_?s("processing"):e("confirmWithdraw")})]})]})]})}),(0,t.jsx)("div",{className:"lg:col-span-2",children:(0,t.jsxs)(n.Zp,{children:[(0,t.jsx)(n.aR,{children:(0,t.jsx)(n.ZB,{children:e("transactionHistory")})}),(0,t.jsx)(n.Wu,{children:g?(0,t.jsx)("div",{className:"space-y-3",children:[void 0,void 0,void 0,void 0,void 0].map((e,s)=>(0,t.jsx)("div",{className:"h-16 animate-pulse rounded bg-muted"},"skeleton-".concat(Date.now(),"-").concat(s)))}):0===j.length?(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[(0,t.jsx)(x.A,{className:"h-16 w-16 text-muted-foreground mb-4"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:e("noTransactions")})]}):(0,t.jsx)("div",{className:"space-y-3",children:j.map(s=>(0,t.jsxs)("div",{className:"flex items-center justify-between border-b pb-3 last:border-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:["deposit"===s.type?(0,t.jsx)(o,{className:"h-5 w-5 text-green-600"}):(0,t.jsx)(m,{className:"h-5 w-5 text-red-600"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:e("type.".concat(s.type))}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:(0,f.Yq)(s.createdAt)})]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("p",{className:"text-lg font-bold ".concat("deposit"===s.type?"text-green-600":"text-red-600"),children:["deposit"===s.type?"+":"-",(0,p.vv)(s.amount,a)]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:s.status})]})]},s._id))})})]})})]})]})}},8233:(e,s,a)=>{Promise.resolve().then(a.bind(a,8070))}},e=>{e.O(0,[625,708,339,37,75,847,977],()=>e(e.s=8233)),_N_E=e.O()}]);