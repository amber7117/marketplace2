(()=>{var e={};e.id=844,e.ids=[844],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7310:e=>{"use strict";e.exports=require("url")},1954:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>l.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>c});var a=r(7096),s=r(6132),n=r(7284),l=r.n(n),o=r(2564),i={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>o[e]);r.d(t,i);let c=["",{children:["[locale]",{children:["payment",{children:["[txId]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,3942)),"/home/runner/work/marketplace2/marketplace2/frontend/app/[locale]/payment/[txId]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,2501)),"/home/runner/work/marketplace2/marketplace2/frontend/app/[locale]/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,5345)),"/home/runner/work/marketplace2/marketplace2/frontend/app/layout.tsx"],error:[()=>Promise.resolve().then(r.bind(r,8196)),"/home/runner/work/marketplace2/marketplace2/frontend/app/error.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,4293)),"/home/runner/work/marketplace2/marketplace2/frontend/app/not-found.tsx"]}],d=["/home/runner/work/marketplace2/marketplace2/frontend/app/[locale]/payment/[txId]/page.tsx"],u="/[locale]/payment/[txId]/page",p={require:r,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/[locale]/payment/[txId]/page",pathname:"/[locale]/payment/[txId]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},4437:(e,t,r)=>{Promise.resolve().then(r.bind(r,2351))},2351:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>PaymentPage});var a=r(784),s=r(9885),n=r(4412),l=r(7114);function PaymentPage({params:e}){let t=(0,n.useTranslations)("Payment"),r=(0,l.useRouter)(),[o,i]=(0,s.useState)("processing"),[c,d]=(0,s.useState)(null);return(0,s.useEffect)(()=>{let t=0,pollPaymentStatus=async()=>{try{let t=await fetch(`/api/payment/${e.txId}`),a=await t.json();if(a.success){let t=a.data.status;if("completed"===t)return i("completed"),setTimeout(()=>{r.push(`/result/${e.txId}?status=success`)},1500),!0;if("failed"===t||"cancelled"===t)return i("failed"),d(a.data.error||"Payment failed"),setTimeout(()=>{r.push(`/result/${e.txId}?status=failed`)},2e3),!0}return!1}catch(e){return console.error("Poll error:",e),!1}},a=setInterval(async()=>{t++;let s=await pollPaymentStatus();(s||t>=30)&&(clearInterval(a),t>=30&&"processing"===o&&(i("failed"),d("Payment timeout"),setTimeout(()=>{r.push(`/result/${e.txId}?status=timeout`)},2e3)))},1e3);return pollPaymentStatus(),()=>clearInterval(a)},[e.txId,r,o]),a.jsx("div",{className:"container mx-auto px-4 py-16",children:(0,a.jsxs)("div",{className:"max-w-md mx-auto text-center",children:["processing"===o&&(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:"w-16 h-16 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),a.jsx("h1",{className:"text-2xl font-bold mb-2",children:t("processing")}),a.jsx("p",{className:"text-gray-600",children:t("pleaseWait")})]}),"completed"===o&&(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),a.jsx("h1",{className:"text-2xl font-bold mb-2",children:t("success")}),a.jsx("p",{className:"text-gray-600",children:t("redirecting")})]}),"failed"===o&&(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),a.jsx("h1",{className:"text-2xl font-bold mb-2",children:t("failed")}),a.jsx("p",{className:"text-gray-600",children:c||t("errorMessage")})]})]})})}},3942:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>l,__esModule:()=>n,default:()=>i});var a=r(5153);let s=(0,a.createProxy)(String.raw`/home/runner/work/marketplace2/marketplace2/frontend/app/[locale]/payment/[txId]/page.tsx`),{__esModule:n,$$typeof:l}=s,o=s.default,i=o}};var t=require("../../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),r=t.X(0,[6,492,504,761,502],()=>__webpack_exec__(1954));module.exports=r})();