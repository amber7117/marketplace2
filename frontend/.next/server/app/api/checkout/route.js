"use strict";(()=>{var e={};e.id=607,e.ids=[607],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},5544:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>l,originalPathname:()=>g,requestAsyncStorage:()=>c,routeModule:()=>i,serverHooks:()=>p,staticGenerationAsyncStorage:()=>d,staticGenerationBailout:()=>m});var o={};r.r(o),r.d(o,{POST:()=>POST,ordersStore:()=>s});var a=r(884),n=r(6132),u=r(5798);!function(){var e=Error("Cannot find module 'uuid'");throw e.code="MODULE_NOT_FOUND",e}();let s=new Map;async function POST(e){try{let t=await e.json(),{items:r,contactInfo:o,billingInfo:a,paymentMethod:n,currency:i="MYR"}=t;if(!r||0===r.length)return u.Z.json({success:!1,error:{code:"INVALID_REQUEST",message:"Cart is empty"}},{status:400});let c=r.reduce((e,t)=>e+t.price*t.quantity,0),d=Math.round(6*c)/100,p=c+d,l=Object(function(){var e=Error("Cannot find module 'uuid'");throw e.code="MODULE_NOT_FOUND",e}())(),m=`TXN-${Date.now()}-${Math.random().toString(36).substr(2,9).toUpperCase()}`,g=`ORD-${Date.now()}`,h={id:l,orderNumber:g,items:r.map(e=>({slug:e.slug,offerId:e.offerId,productName:e.productName||e.slug,denomination:e.denomination||0,quantity:e.quantity,price:e.price,currency:i})),subtotal:c,tax:d,total:p,currency:i,status:"pending",paymentStatus:"pending",paymentMethod:n,transactionId:m,contactInfo:o,billingInfo:a,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};s.set(l,h),s.set(m,h);let _={success:!0,data:{orderId:l,orderNumber:g,transactionId:m,total:p,currency:i,paymentUrl:`/payment/${m}`}};return u.Z.json(_)}catch(t){console.error("Checkout error:",t);let e={success:!1,error:{code:"INTERNAL_ERROR",message:t.message||"Failed to create order"}};return u.Z.json(e,{status:500})}}let i=new a.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/checkout/route",pathname:"/api/checkout",filename:"route",bundlePath:"app/api/checkout/route"},resolvedPagePath:"/home/runner/work/marketplace2/marketplace2/frontend/app/api/checkout/route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:c,staticGenerationAsyncStorage:d,serverHooks:p,headerHooks:l,staticGenerationBailout:m}=i,g="/api/checkout/route"}};var t=require("../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),r=t.X(0,[6,107],()=>__webpack_exec__(5544));module.exports=r})();